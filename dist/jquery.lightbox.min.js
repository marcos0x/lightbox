!function(a,b){"use strict";function c(){var a=this;a.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),a.init=function(c,d){if(a.defaults={box:b('<div class="lightbox-main" id="lightbox" style="display:none"><div class="lightbox-overlay"></div><div class="lightbox-wrapper"><div class="lightbox-body"><div class="lightbox-close"><a href="#">&times;</a></div><div class="lightbox-prev" style="display:none;"><a href="#"><i></i></a></div><div class="lightbox-next" style="display:none;"><a href="#"><i></i></a></div><div class="lightbox-header cf"></div><div class="lightbox-content cf"></div><div class="lightbox-footer cf"></div></div></div></div>'),easing:"undefined"!=typeof jQuery.ui?"easeOutCubic":!1,texts:"undefined"!=typeof app&&"undefined"!=typeof app.data&&"undefined"!=typeof app.data.texts?app.data.texts:{loading:"Cargando...",error:"Ha ocurrido un error",accept:"Aceptar",cancel:"Cancelar",deletes:{title:"¿Seguro que desea eliminar?",description_list:"Esta acción eliminará los elementos seleccionados y no se puede deshacer.",description_single:"Esta acción no se puede deshacer."},select:{title:"Debe seleccionar un elemento",description:"Para realizar la acción solicitada debe tener al menos un elemento seleccionado."}},href:c.attr("href")||!1,behavior:c.data("behavior")||"default",type:c.data("type")||!1,action:c.data("action")||!1,classes:c.data("class")||!1,width:c.data("width")||!1,height:c.data("height")||!1,types:{image:["jpg","jpeg","png","gif","tif","tiff","bmp"],video:["mp4","webm","ogg","flv"]},videoPoster:c.data("video-poster")||"",gallery:c.data("gallery")||!1,title:c.data("title")||!1,description:c.data("description")||!1,content:c.data("content")||!1,footer:c.data("footer")||!1,documentBody:{position:b("body").css("position"),overflow:b("body").css("overflow")}},a.settings=b.extend(!0,a.defaults,d),a.setEvents(),a.setAction(),a.setBehavior(),a.setType(),a.setView(),("image"==a.settings.type||"video"==a.settings.type||"undefined"!=typeof a.settings.gallery)&&a.isMobile){var e="undefined"!=typeof document.documentElement.clientWidth?Math.max(document.documentElement.clientWidth,b(window).width()):b(window).width();if(480>e)return a.cancel(c),!1}return!0},a.windowWidth=function(){return a.isMobile&&"undefined"!=typeof document.documentElement.clientWidth?Math.max(document.documentElement.clientWidth,b(window).width()):b(window).width()},a.windowHeight=function(){return a.isMobile&&"undefined"!=typeof document.documentElement.clientHeight?Math.max(document.documentElement.clientHeight,b(window).height()):b(window).height()},a.setEvents=function(){b(document).on("click",'.lightbox-close, .lightbox-main a[data-dismiss="modal"], .lightbox-main a[data-dismiss="lightbox"]',function(){return a.close(),!1}),b(document).on("click",".lightbox-delete-multiple",function(){a.close();var c=b(element.attr("data-form"));return c.attr("action",c.attr("action").replace("index","delete")),c.submit(),!1}),a.settings.box.find(".lightbox-prev a").off("click").click(function(){return a.loadItemGalleryPrev(),!1}),a.settings.box.find(".lightbox-next a").off("click").click(function(){return a.loadItemGalleryNext(),!1}),b(window).resize(function(){a.setPosition()})},a.setAction=function(){switch(a.settings.action){case"delete":a.settings.title=a.settings.title.length?a.settings.title:a.settings.texts.deletes.title,a.settings.content=a.settings.description.length?a.settings.description:"<p>"+a.settings.texts.deletes.description_single+"</p>",a.settings.footer='<a data-dismiss="lightbox" href="#" class="btn btn-default">'+a.settings.texts.cancel+"</a>",a.settings.footer+='<a href="'+a.settings.href+'" class="btn btn-primary">'+a.settings.texts.accept+"</a>",a.settings.behavior="modal",a.settings.type="inline";break;case"delete-multiple":a.settings.title=a.settings.title.length?a.settings.title:a.settings.texts.deletes.title,a.settings.content=a.settings.description.length?a.settings.description:"<p>"+a.settings.texts.deletes.description_list+"</p>",a.settings.footer='<a data-dismiss="lightbox" href="#" class="btn btn-default">'+a.settings.texts.cancel+"</a>",a.settings.footer+='<a href="#" class="btn btn-primary lightbox-delete-multiple">'+a.settings.texts.accept+"</a>",a.settings.behavior="modal",a.settings.type="inline"}},a.setBehavior=function(){switch(a.settings.behavior){case"modal":a.settings.box.addClass("is-modal");break;default:a.settings.box.find(".lightbox-wrapper").click(function(b){return b.target===this?(a.close(),!1):void 0})}},a.checkType=function(c,d){if("string"!=typeof c||"string"!=typeof d)return!1;switch(c){case"image":case"video":var e=d.indexOf(".")>-1?d.split(".").pop():!1;if(e.length&&-1!=b.inArray(e,a.settings.types[c]))return!0;break;case"ajax":if(d.indexOf("http")>-1)return!0}return!1},a.setType=function(b){var b=b||a.settings.href;a.settings.type||(a.settings.type=a.checkType("image",b)?"image":a.checkType("video",b)?"video":a.checkType("ajax",b)?"ajax":"inline"),"inline"!=a.settings.type||a.settings.content||(a.settings.content=b)},a.setView=function(){if(a.settings.isGallery=a.settings.gallery.length?!0:!1,a.settings.isGallery)a.loadGallery();else switch(a.settings.title.length?a.settings.box.find(".lightbox-header").html(a.settings.title):a.settings.box.find(".lightbox-header").hide(),a.settings.footer.length?a.settings.box.find(".lightbox-footer").html(a.settings.footer):a.settings.box.find(".lightbox-footer").hide(),a.settings.type){case"inline":b(a.settings.content).length?(a.settings.contentElement=b(a.settings.content).clone(!0),b(a.settings.content).wrap('<div class="lightbox-content-clone" style="display:none"></div>'),b(a.settings.content).remove(),a.settings.box.find(".lightbox-content").html(a.settings.contentElement)):a.settings.box.find(".lightbox-content").html(a.settings.content);break;case"image":a.settings.box.find(".lightbox-header").hide(),a.settings.box.find(".lightbox-footer").hide(),a.settings.box.find(".lightbox-content").addClass("loading"),a.loadImage(a.settings.href);break;case"video":a.settings.box.find(".lightbox-header").hide(),a.settings.box.find(".lightbox-footer").hide(),a.settings.box.find(".lightbox-content").addClass("loading"),a.loadVideo(a.settings.href);break;case"ajax":b.ajax({url:a.settings.href,success:function(b){a.settings.box.find(".lightbox-content").html(b)}});break;case"iframe":a.settings.box.find(".lightbox-content").html('<iframe src="'+a.settings.href+'" border="0"></iframe>')}},a.loadGallery=function(){if(a.gallery={items:[],current:0},b.each(b("a",b(a.settings.gallery)),function(){var c=b(this).attr("href");"undefined"!=typeof c&&(a.checkType("image",c)?a.gallery.items.push(c):a.checkType("video",c)&&a.gallery.items.push(c))}),a.gallery.items.length<=1)return a.settings.gallery=!1,a.settings.isGallery=!1,a.setView();a.settings.box.addClass("is-gallery"),a.settings.box.addClass("is-"+a.settings.type),a.settings.box.find(".lightbox-header").hide(),a.settings.box.find(".lightbox-footer").hide(),a.settings.box.find(".lightbox-content").addClass("loading").html(""),a.settings.box.find(".lightbox-prev").hide(),a.settings.box.find(".lightbox-next").hide();for(var c in a.gallery.items)if(a.settings.href==a.gallery.items[c]){a.gallery.current=parseInt(c,10);break}a.loadItemGallery(a.gallery.items[a.gallery.current]),a.gallery.items.length>1&&(a.settings.box.find(".lightbox-prev").show(),a.settings.box.find(".lightbox-next").show())},a.loadItemGalleryPrev=function(){a.gallery.current-=1,-1==a.gallery.current&&(a.gallery.current=a.gallery.items.length-1),a.loadItemGallery(a.gallery.items[a.gallery.current])},a.loadItemGalleryNext=function(){a.gallery.current+=1,a.gallery.current>a.gallery.items.length-1&&(a.gallery.current=0),a.loadItemGallery(a.gallery.items[a.gallery.current])},a.loadItemGallery=function(b){a.setType(b),a.checkType("image",b)?a.loadImage(b):a.checkType("video",b)&&a.loadVideo(b)},a.preloadImage=function(c,d){b("<img />").attr("src",c).css({maxWidth:"100%"}).load(function(){clearTimeout(a.preloadShowLoadingTimer);var b=this;"function"==typeof d&&d(b)})},a.loadImage=function(b,c){a.preloadShowLoading=!1,a.preloadShowLoadingTimer=setTimeout(function(){a.preloadShowLoading=!0,a.settings.box.find(".lightbox-body").css({width:a.settings.box.find(".lightbox-content").width()+"px",height:a.settings.box.find(".lightbox-content").height()+"px"}),a.settings.box.find(".lightbox-content").addClass("loading").addClass("dark").html("")},200),a.preloadImage(b,function(b){var d=b.width,e=b.height;a.settings.box.addClass("is-image"),a.settings.box.removeClass("is-video"),a.setSize(d,e),a.settings.box.find(".lightbox-content").removeClass("loading").html(b),"function"==typeof c&&c(b,d,e)})},a.loadVideo=function(c,d){var e=a.settings.width||640,f=a.settings.height||480,g="flash";c.indexOf("youtube")>-1?(c=c.replace("watch?v=","embed/"),g="iframe"):c.indexOf("vimeo")>-1&&(c=c.replace("www.",""),c=c.replace("vimeo.com/","player.vimeo.com/video/"),g="iframe");var h=b('<div class="lightbox-video" style="width:'+e+"px; height:"+f+'px; overflow:hidden;"></div>');switch(g){case"flash":var i=b('<object id="lightbox-video" width="'+e+'" height="'+f+'" type="application/x-shockwave-flash" data="http://releases.flowplayer.org/swf/flowplayer-3.2.18.swf"><param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.18.swf"><param name="allowfullscreen" value="true"><param value="true" name="allowfullscreen"><param value="always" name="allowscriptaccess"><param value="high" name="quality"><param value="#000000" name="bgcolor"><param  name="flashvars" value=\'config={"clip":{"autoPlay":false,"autoBuffering":true,"baseUrl":"'+c.split("/").slice(0,-1).join("/")+'/","url":"'+c.split("/").slice(-1).join("")+'"},"playerId":"lightbox-video","playlist":[{"autoPlay":false,"autoBuffering":true,"baseUrl":"'+c.split("/").slice(0,-1).join("/")+'/","url":"'+c.split("/").slice(-1).join("")+"\"}]}'></object>");e+=2,f+=2;break;case"iframe":var i='<iframe id="lightbox-video" width="100%" height="100%" src="'+c+'"></iframe>'}h.html(i),a.settings.box.addClass("is-video"),a.settings.box.removeClass("is-image"),a.setSize(e,f),a.settings.box.find(".lightbox-content").removeClass("loading").html(h),"function"==typeof d&&d(h,e,f)},a.setSize=function(b,c,d){a.settings.newWidth=b||a.settings.newWidth,a.settings.newHeight=c||a.settings.newHeight;var e=a.settings.box.find(".lightbox-body"),f=e.outerWidth(),g=e.outerHeight(),h=e.css("marginTop"),i=a.settings.newHeight,j=a.settings.newWidth,k=(a.windowHeight()-a.settings.newHeight)/2;if(a.windowWidth()-100<a.settings.newWidth){if(j=a.windowWidth()-100,i=j*a.settings.newHeight/a.settings.newWidth,k=(a.windowHeight()-i)/2,a.windowHeight()-30<i){var l=a.windowHeight()-30;j=l*j/i,k=(a.windowHeight()-l)/2,i=l}}else a.windowHeight()-30<a.settings.newHeight&&(i=a.windowHeight()-30,j=i*a.settings.newWidth/a.settings.newHeight,k=(a.windowHeight()-i)/2);if(h!=k&&("undefined"==typeof d||d?e.animate({"margin-top":k+"px"},{duration:300,queue:!1,easing:a.settings.easing}):e.css({"margin-top":k+"px"})),f!=j&&("undefined"==typeof d||d?e.animate({width:j+"px"},{duration:300,queue:!1,easing:a.settings.easing}):e.css({width:j+"px"})),g!=i&&("undefined"==typeof d||d?e.animate({height:i+"px"},{duration:300,queue:!1,easing:a.settings.easing,complete:function(){e.css({overflow:"visible"})}}):e.css({height:i+"px"})),a.settings.isGallery){var m=a.settings.box.find(".lightbox-prev"),n=a.settings.box.find(".lightbox-next"),o=(i-m.outerHeight())/2;(m.css("top")!=o||n.css("top")!=o)&&("undefined"==typeof d||d?(m.animate({top:o+"px"},{duration:300,queue:!1,easing:a.settings.easing}),n.animate({top:o+"px"},{duration:300,queue:!1,easing:a.settings.easing})):(m.css({top:o+"px"}),n.css({top:o+"px"})))}},a.setPosition=function(b){var b=b||!1;if("initial"==b){a.settings.box.css("visibility","hidden"),a.settings.box.css("display","block");var c=a.settings.box.find(".lightbox-body");c.css({"margin-top":(a.windowHeight()-c.outerHeight())/2+"px"}),a.settings.box.css("display","none"),a.settings.box.css("visibility","visible")}else a.setSize(!1,!1,!1)},a.bind=function(b,c){b.off("click").click(function(){var d=a.init(b,c);return d?(a.open(),!1):void 0})},a.cancel=function(a){a.attr("target","_blank")},a.open=function(){b("html,body").css({position:"relative",overflow:"hidden"}),b("body").append(a.settings.box),a.settings.classes&&a.settings.box.addClass(a.settings.classes),a.setPosition("initial"),a.settings.box.fadeIn(450)},a.close=function(){b("html,body").css({position:a.settings.documentBody.position,overflow:a.settings.documentBody.overflow}),a.settings.box.fadeOut(450,function(){"inline"==a.settings.type&&(b(".lightbox-content-clone").html(a.settings.contentElement),b(".lightbox-content-clone").find(a.settings.content).unwrap()),a.settings.box.remove()})}}a.lightbox=new c,b.fn.extend({lightbox:function(c){var d=c||{};return this.each(function(){var c=b(this);switch(d){default:case"bind":a.lightbox.bind(c,d);break;case"close":a.lightbox.close()}})}})}(window,jQuery);