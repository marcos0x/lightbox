!function(a,b){"use strict";function c(){var a=this;a.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),a.init=function(c,d){if(a.defaults={box:b('<div class="lightbox-main" id="lightbox" style="display:none"><div class="lightbox-overlay"></div><div class="lightbox-wrapper"><div class="lightbox-body"><div class="lightbox-close"><a href="#">&times;</a></div><div class="lightbox-prev" style="display:none;"><a href="#"><i></i></a></div><div class="lightbox-next" style="display:none;"><a href="#"><i></i></a></div><div class="lightbox-header cf"></div><div class="lightbox-content cf"></div><div class="lightbox-footer cf"></div></div></div></div>'),easing:"undefined"!=typeof jQuery.ui?"easeOutCubic":!1,texts:"undefined"!=typeof app&&"undefined"!==app.data&&"undefined"!==app.data.texts?app.data.texts:{loading:"Cargando...",error:"Ha ocurrido un error",accept:"Aceptar",cancel:"Cancelar",deletes:{title:"¿Seguro que desea eliminar?",description_list:"Esta acción eliminará los elementos seleccionados y no se puede deshacer.",description_single:"Esta acción no se puede deshacer."},select:{title:"Debe seleccionar un elemento",description:"Para realizar la acción solicitada debe tener al menos un elemento seleccionado."}},href:c.attr("href")||!1,behavior:c.data("behavior")||"default",type:c.data("type")||!1,action:c.data("action")||!1,classes:c.data("class")||!1,width:c.data("width")||!1,height:c.data("height")||!1,imageTypes:["jpg","jpeg","png","gif","tif","tiff","bmp"],videoTypes:["mp4","webm","ogg","flv"],videoPoster:c.data("video-poster")||"",gallery:c.data("gallery")||!1,title:c.data("title")||!1,description:c.data("description")||!1,content:c.data("content")||!1,footer:c.data("footer")||!1},a.settings=b.extend(!0,a.defaults,d),a.settings.isGallery=a.settings.gallery.length?!0:!1,a.setEvents(),a.setAction(),a.setType(),a.setBehavior(),a.setView(),("image"==a.settings.type||"video"==a.settings.type||"undefined"!=typeof a.settings.gallery)&&a.isMobile){var e="undefined"!=typeof document.documentElement.clientWidth?Math.max(document.documentElement.clientWidth,b(window).width()):b(window).width();if(480>e)return a.cancel(c),!1}return!0},a.setEvents=function(){b(document).on("click",'.lightbox-close, .lightbox-main a[data-dismiss="modal"], .lightbox-main a[data-dismiss="lightbox"]',function(){return a.close(),!1}),b(document).on("click",".lightbox-delete-multiple",function(){a.close();var c=b(element.attr("data-form"));return c.attr("action",c.attr("action").replace("index","delete")),c.submit(),!1}),b(window).resize(function(){a.setPosition()})},a.setAction=function(){switch(a.settings.action){case"delete":a.settings.title=a.settings.title.length?a.settings.title:a.settings.texts.deletes.title,a.settings.content=a.settings.description.length?a.settings.description:"<p>"+a.settings.texts.deletes.description_single+"</p>",a.settings.footer='<a data-dismiss="lightbox" href="#" class="btn btn-default">'+a.settings.texts.cancel+"</a>",a.settings.footer+='<a href="'+a.settings.href+'" class="btn btn-primary">'+a.settings.texts.accept+"</a>",a.settings.behavior="modal",a.settings.type="inline";break;case"delete-multiple":a.settings.title=a.settings.title.length?a.settings.title:a.settings.texts.deletes.title,a.settings.content=a.settings.description.length?a.settings.description:"<p>"+a.settings.texts.deletes.description_list+"</p>",a.settings.footer='<a data-dismiss="lightbox" href="#" class="btn btn-default">'+a.settings.texts.cancel+"</a>",a.settings.footer+='<a href="#" class="btn btn-primary lightbox-delete-multiple">'+a.settings.texts.accept+"</a>",a.settings.behavior="modal",a.settings.type="inline"}},a.setType=function(){if(!a.settings.type){var c=-1!=a.settings.href.indexOf(".")?a.settings.href.split(".").pop():!1;a.settings.type=c.length&&-1!=b.inArray(c,a.settings.imageTypes)?"image":c.length&&-1!=b.inArray(c,a.settings.videoTypes)?"video":a.settings.href.length&&a.settings.href.indexOf("http")>-1?"ajax":"inline"}"inline"!=a.settings.type||a.settings.content||(a.settings.content=a.settings.href)},a.setPosition=function(c){var c=c||!1,d=a.isMobile&&"undefined"!=typeof document.documentElement.clientHeight?Math.max(document.documentElement.clientHeight,b(window).height()):b(window).height();"initial"==c&&(a.settings.box.css("visibility","hidden"),a.settings.box.css("display","block")),a.settings.box.find(".lightbox-body").css({"margin-top":(d-a.settings.box.find(".lightbox-body").outerHeight())/2+"px"}),"initial"==c&&(a.settings.box.css("display","none"),a.settings.box.css("visibility","visible"))},a.preloadImage=function(c,d){b("<img />").attr("src",c).load(function(){clearTimeout(a.preloadShowLoadingTimer);var b=this;"function"==typeof d&&d.call(void 0,b)})},a.loadImage=function(c,d){var e;e=a.settings.isGallery?a.gallery.items[c]:c;var f=a.settings.isGallery&&void 0!==a.gallery&&a.gallery.items.length>1;a.preloadShowLoading=!1,a.preloadShowLoadingTimer=setTimeout(function(){a.preloadShowLoading=!0,a.settings.box.find(".lightbox-body").css({width:a.settings.box.find(".lightbox-content").width()+"px",height:a.settings.box.find(".lightbox-content").height()+"px"}),a.settings.box.find(".lightbox-content").addClass("loading").addClass("dark").html("")},200),a.preloadImage(e,function(c){var e=c.width,g=c.height,h=a.isMobile&&"undefined"!=typeof document.documentElement.clientHeight?Math.max(document.documentElement.clientHeight,b(window).height()):b(window).height();a.settings.box.find(".lightbox-content").removeClass("loading").html(c),a.settings.box.find(".lightbox-body").outerWidth()!=e&&a.settings.box.find(".lightbox-body").css("marginTop")!=(h-g)/2&&a.settings.box.find(".lightbox-body").animate({width:e+"px","margin-top":(h-g)/2+"px"},300,a.settings.easing),f&&(a.settings.box.find(".lightbox-prev").css("top")!=(g-a.settings.box.find(".lightbox-prev").outerHeight())/2&&a.settings.box.find(".lightbox-prev").animate({top:(g-a.settings.box.find(".lightbox-prev").outerHeight())/2+"px"},300,a.settings.easing),a.settings.box.find(".lightbox-next").css("top")!=(g-a.settings.box.find(".lightbox-next").outerHeight())/2&&a.settings.box.find(".lightbox-next").animate({top:(g-a.settings.box.find(".lightbox-next").outerHeight())/2+"px"},300,a.settings.easing)),"function"==typeof d&&d.call(void 0,c,e,g)})},a.loadVideo=function(c,d){var e;e=a.settings.isGallery?a.gallery.items[c]:c;var f=(-1!=e.indexOf(".")?e.split(".").pop():!1,a.settings.isGallery&&void 0!==a.gallery&&a.gallery.items.length>1),g=a.settings.width||640,h=a.settings.height||480,i=a.isMobile&&"undefined"!=typeof document.documentElement.clientHeight?Math.max(document.documentElement.clientHeight,b(window).height()):b(window).height(),j='<div class="lightbox-video" style="width:'+g+"px; height:"+h+'px; overflow:hidden;"><object id="lightbox-video" width="'+g+'" height="'+h+'" type="application/x-shockwave-flash" data="http://releases.flowplayer.org/swf/flowplayer-3.2.18.swf"><param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.18.swf"><param name="allowfullscreen" value="true"><param value="true" name="allowfullscreen"><param value="always" name="allowscriptaccess"><param value="high" name="quality"><param value="#000000" name="bgcolor"><param  name="flashvars" value=\'config={"clip":{"autoPlay":false,"autoBuffering":true,"baseUrl":"'+e.split("/").slice(0,-1).join("/")+'/","url":"'+e.split("/").slice(-1).join("")+'"},"playerId":"lightbox-video","playlist":[{"autoPlay":false,"autoBuffering":true,"baseUrl":"'+e.split("/").slice(0,-1).join("/")+'/","url":"'+e.split("/").slice(-1).join("")+"\"}]}'></object></div>";g+=2,a.settings.box.find(".lightbox-content").removeClass("loading").html(j),a.settings.box.find(".lightbox-body").outerWidth()!=g&&a.settings.box.find(".lightbox-body").css("marginTop")!=(i-h)/2&&a.settings.box.find(".lightbox-body").animate({width:g+"px","margin-top":(i-h)/2+"px"},300,a.settings.easing),f&&(a.settings.box.find(".lightbox-prev").css("top")!=(h-a.settings.box.find(".lightbox-prev").outerHeight())/2&&a.settings.box.find(".lightbox-prev").animate({top:(h-a.settings.box.find(".lightbox-prev").outerHeight())/2+"px"},300,a.settings.easing),a.settings.box.find(".lightbox-next").css("top")!=(h-a.settings.box.find(".lightbox-next").outerHeight())/2&&a.settings.box.find(".lightbox-next").animate({top:(h-a.settings.box.find(".lightbox-next").outerHeight())/2+"px"},300,a.settings.easing)),"function"==typeof d&&d.call(void 0,j,g,h)},a.setBehavior=function(){switch(a.settings.behavior){case"modal":a.settings.box.addClass("is-modal");break;default:a.settings.box.find(".lightbox-wrapper").click(function(b){return b.target===this?(a.close(),!1):void 0})}},a.setView=function(){if(a.settings.isGallery){switch(a.gallery={items:[],loaded:[],current:0},a.settings.type){case"image":a.settings.box.addClass("is-image");break;case"video":a.settings.box.addClass("is-video")}if(a.settings.box.addClass("is-gallery"),a.settings.box.find(".lightbox-header").hide(),a.settings.box.find(".lightbox-footer").hide(),a.settings.box.find(".lightbox-content").addClass("loading").html(""),a.settings.box.find(".lightbox-prev").hide(),a.settings.box.find(".lightbox-next").hide(),b.each(b("a",b(a.settings.gallery)),function(){var c=b(this).attr("href");switch(a.settings.type){case"image":c.length&&-1!=b.inArray(c.split(".").pop(),a.settings.imageTypes)&&a.gallery.items.push(c);break;case"video":c.length&&-1!=b.inArray(c.split(".").pop(),a.settings.videoTypes)&&a.gallery.items.push(c)}}),!a.gallery.items.length)return a.settings.gallery=!1,a.setView();for(var c in a.gallery.items)if(a.settings.href==a.gallery.items[c]){a.gallery.current=parseInt(c,10);break}switch(a.settings.type){case"image":a.loadImage(a.gallery.current);break;case"video":a.loadVideo(a.gallery.current)}a.gallery.items.length>1&&(a.settings.box.find(".lightbox-prev").show(),a.settings.box.find(".lightbox-next").show()),a.settings.box.find(".lightbox-prev a").off("click").click(function(){switch(a.gallery.current-=1,-1==a.gallery.current&&(a.gallery.current=a.gallery.items.length-1),a.settings.type){case"image":a.loadImage(a.gallery.current);break;case"video":a.loadVideo(a.gallery.current)}return!1}),a.settings.box.find(".lightbox-next a").off("click").click(function(){switch(a.gallery.current+=1,a.gallery.current>a.gallery.items.length-1&&(a.gallery.current=0),a.settings.type){case"image":a.loadImage(a.gallery.current);break;case"video":a.loadVideo(a.gallery.current)}return!1})}else switch(a.settings.title.length?a.settings.box.find(".lightbox-header").html(a.settings.title):a.settings.box.find(".lightbox-header").hide(),a.settings.footer.length?a.settings.box.find(".lightbox-footer").html(a.settings.footer):a.settings.box.find(".lightbox-footer").hide(),a.settings.type){case"inline":if(b(a.settings.content).length){var d=b(a.settings.content).clone(!0);a.settings.box.find(".lightbox-content").html(d)}else a.settings.box.find(".lightbox-content").html(a.settings.content);break;case"image":a.settings.box.addClass("is-image"),a.settings.box.find(".lightbox-header").hide(),a.settings.box.find(".lightbox-footer").hide(),a.settings.box.find(".lightbox-content").addClass("loading"),a.loadImage(a.settings.href);break;case"video":a.settings.box.addClass("is-video"),a.settings.box.find(".lightbox-header").hide(),a.settings.box.find(".lightbox-footer").hide(),a.settings.box.find(".lightbox-content").addClass("loading"),a.loadVideo(a.settings.href);break;case"ajax":b.ajax({url:a.settings.href,success:function(b){a.settings.box.find(".lightbox-content").html(b)}});break;case"iframe":a.settings.box.find(".lightbox-content").html('<iframe src="'+a.settings.href+'" border="0"></iframe>')}},a.bind=function(b,c){b.off("click").click(function(){var d=a.init(b,c);return d?(a.open(),!1):void 0})},a.cancel=function(a){a.attr("target","_blank")},a.open=function(){b("html,body").addClass("no-scroll"),b("body").append(a.settings.box),a.settings.classes&&a.settings.box.addClass(a.settings.classes),a.setPosition("initial"),a.settings.box.fadeIn(450)},a.close=function(){b("html,body").removeClass("no-scroll"),a.settings.box.fadeOut(450,function(){a.settings.box.remove()})}}a.lightbox=new c,b.fn.extend({lightbox:function(c){var d=c||{};return this.each(function(){var c=b(this);switch(d){default:case"bind":a.lightbox.bind(c,d);break;case"close":a.lightbox.close()}})}})}(window,jQuery);